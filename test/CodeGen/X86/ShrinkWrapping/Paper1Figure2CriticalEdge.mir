# RUN: llc -mtriple=i386-apple-darwin10 -run-pass=shrink-wrap2 %s -enable-shrink-wrap2=true -debug-only=shrink-wrap2 -o /dev/null 2>&1 | FileCheck %s
# REQUIRES: asserts
--- |
  define void @foo() nounwind {
  entry:
    ret void
  }
...
---
name:            foo
tracksRegLiveness: true
body:             |
  bb.0:
    successors: %bb.1, %bb.2

    NOOP implicit-def %eflags
    JNE_1 %bb.2, implicit killed %eflags
    JMP_1 %bb.1

  bb.1:
    successors: %bb.3, %bb.4
    NOOP implicit-def %eflags
    JE_1 %bb.4, implicit killed %eflags
    JMP_1 %bb.3

  bb.2:
    successors: %bb.4

    %ebx = MOV32ri 89
    JMP_1 %bb.4

  bb.3:
    RET 0

  bb.4:

    %ebx = MOV32ri 89
    RET 0
...
#CHECK-LABEL: foo

#CHECK: BB#2 uses : %EBX
#CHECK-NEXT: BB#4 uses : %EBX
#CHECK: **** Shrink-wrapping results
#CHECK-NEXT: BB#0: Saves: %EBX, | Restores:
#CHECK-NEXT: BB#3: Saves: | Restores: %EBX,
#CHECK-NEXT: BB#4: Saves: | Restores: %EBX,
