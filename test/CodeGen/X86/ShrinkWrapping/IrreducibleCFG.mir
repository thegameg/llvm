# RUN: llc -run-pass=shrink-wrap2 %s -enable-shrink-wrap2=true -debug-only=shrink-wrap2 -o /dev/null 2>&1 | FileCheck %s
# REQUIRES: asserts
--- |
  define void @getAffNeighbour() #0 {
  entry:
    ret void
  }

  attributes #0 = { nounwind }

...
---
name:            getAffNeighbour
tracksRegLiveness: true
body:             |
  bb.0:
    successors: %bb.10, %bb.6

    NOOP implicit-def %eflags
    JNE_1 %bb.10, implicit killed %eflags
    JMP_1 %bb.6

  bb.1:
    successors: %bb.6

    JMP_1 %bb.6

  bb.2:
    successors: %bb.10

    JMP_1 %bb.10

  bb.3:
    successors: %bb.4

    %ebx = MOV32ri 30
    JMP_1 %bb.4

  bb.4:
    successors: %bb.5, %bb.9

    NOOP implicit-def %eflags
    JNE_1 %bb.9, implicit killed %eflags
    JMP_1 %bb.5

  bb.5:
    RET 0

  bb.6:
    successors: %bb.2, %bb.7

    NOOP implicit-def %eflags
    JE_1 %bb.2, implicit killed %eflags
    JMP_1 %bb.7

  bb.7:
    successors: %bb.4

    JMP_1 %bb.4

  bb.8:
    successors: %bb.3, %bb.1

    NOOP implicit-def %eflags
    JNE_1 %bb.3, implicit killed %eflags
    JMP_1 %bb.1

  bb.9:
    successors: %bb.4, %bb.8

    NOOP implicit-def %eflags
    JNE_1 %bb.4, implicit killed %eflags
    JMP_1 %bb.8

  bb.10:
    successors: %bb.7

    JMP_1 %bb.7

...
#CHECK: BB#1 uses : %RBX
#CHECK: **** Shrink-wrapping results
#CHECK-NEXT: BB#0: Saves: %RBX, | Restores:
#CHECK-NEXT: BB#5: Saves: | Restores: %RBX,
